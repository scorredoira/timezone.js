var mzone=mzone||{};!function(a){"use strict";function e(a){return a>96?a-87:a>64?a-29:a-48}function f(a){var h,b=0,c=a.split("."),d=c[0],f=c[1]||"",g=1,i=0,j=1;45===a.charCodeAt(0)&&(b=1,j=-1);for(var b;b<d.length;b++)h=e(d.charCodeAt(b)),i=60*i+h;for(var b=0;b<f.length;b++)g/=60,h=e(f.charCodeAt(b)),i+=h*g;return i*j}function g(a){for(var b=0;b<a.length;b++)a[b]=f(a[b])}function h(a,b){for(var c=0;c<b;c++)a[c]=Math.round((a[c-1]||0)+6e4*a[c]);a[b-1]=1/0}function i(a,b){var d,c=[];for(d=0;d<b.length;d++)c[d]=a[b[d]];return c}function j(a){var b=a.split("|"),c=b[2].split(" "),d=b[3].split(""),e=b[4].split(" ");return g(c),g(d),g(e),h(e,d.length),{name:b[0],abbrs:i(b[1].split(" "),d),offsets:i(c,d),untils:e,population:0|b[5]}}function k(a){a&&this._set(j(a))}function l(a){return(a||"").toLowerCase().replace(/\//g,"_")}function m(a){var c,e,f,g;for(void 0===a?a=[]:"string"==typeof a&&(a=[a]),c=0;c<a.length;c++)f=a[c].split("|"),e=f[0],g=l(e),b[g]=a[c],d[g]=e}function n(a,e){a=l(a);var g,f=b[a];return f instanceof k?f:"string"==typeof f?(f=new k(f),b[a]=f,f):c[a]&&e!==n&&(g=n(c[a],n))?(f=b[a]=new k,f._set(g),f.name=d[a],f):null}function o(a){var b,e,f,g;for(void 0===a?a=[]:"string"==typeof a&&(a=[a]),b=0;b<a.length;b++)e=a[b].split("|"),f=l(e[0]),g=l(e[1]),c[f]=g,d[f]=e[0],c[g]=f,d[g]=e[1]}function p(a){m(a.zones),o(a.links)}a.loadData=p,a.tz=function(a,b){"string"==typeof a&&(a=new Date(a));var c=new Date(a.getTime()+6e4*a.getTimezoneOffset()),d=n(b);if(!d)throw"Invalid timezone: "+b;var e=d.parse(c);return new Date(c.getTime()-6e4*e)};var b={},c={},d={};k.prototype={_set:function(a){this.name=a.name,this.abbrs=a.abbrs,this.untils=a.untils,this.offsets=a.offsets,this.population=a.population},_index:function(a){var d,b=+a,c=this.untils;for(d=0;d<c.length;d++)if(b<c[d])return d},parse:function(a){var f,g,h,i,b=+a,c=this.offsets,d=this.untils,e=d.length-1;for(i=0;i<e;i++)if(f=c[i],g=c[i+1],h=c[i?i-1:i],f<g?f=g:f>h&&(f=h),b<d[i]-6e4*f)return c[i];return c[e]},abbr:function(a){return this.abbrs[this._index(a)]},offset:function(a){return this.offsets[this._index(a)]}}}(mzone),module.exports=mzone;
